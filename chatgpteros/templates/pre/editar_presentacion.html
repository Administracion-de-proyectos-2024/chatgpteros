<!-- editar_presentacion.html -->
{% extends 'core/base.html' %}

{% block content %}
<h2>Editar Presentación</h2>
<form method="post">
    {% csrf_token %}
    {{ presentacion_form.as_p }}

    <!-- Agrega aquí los campos para editar las diapositivas -->
    <fieldset>
        <legend>Diapositivas</legend>
        {{ diapositiva_formset.management_form }}
        <div id="formset-container">
            {% for form in diapositiva_formset %}
                {{ form.as_p }}
            {% endfor %}
        </div>
        <button type="button" id="agregar-diapositiva">Agregar Diapositiva</button>
    </fieldset>

    <button type="submit">Guardar Cambios</button>
</form>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        var addButton = document.getElementById('agregar-diapositiva');
        var formset = document.getElementById('formset-container');
        var totalForms = document.getElementById('id_diapositiva_set-TOTAL_FORMS');
    
        addButton.addEventListener('click', function() {
            var formIndex = parseInt(totalForms.value); // Obtener el índice actual del formulario
    
            // Crear un nuevo formulario de diapositivas
            var newForm = document.createElement('div');
            newForm.className = 'formset-row';
            newForm.innerHTML = `
                <p><label for="id_diapositiva_set-${formIndex}-contenido">Contenido:</label> <textarea id="id_diapositiva_set-${formIndex}-contenido" name="diapositiva_set-${formIndex}-contenido"></textarea></p>
                <!-- Agrega aquí cualquier otro campo que necesites en tu formulario de diapositivas -->
            `;
    
            formset.appendChild(newForm); // Agregar el nuevo formulario al DOM
    
            formIndex++;
            totalForms.setAttribute('value', formIndex); // Actualizar el valor del contador de formularios
        });
    });
    </script>
    
{% endblock %}